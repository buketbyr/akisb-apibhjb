import type { NextApiRequest, NextApiResponse } from 'next';import { prisma } from '@/lib/prisma';export default async function handler(req:NextApiRequest,res:NextApiResponse){const hasDbUrl=!!process.env.DATABASE_URL&&!!process.env.DATABASE_URL.trim();if(!hasDbUrl){return res.status(200).json({ok:false,driver:'postgres+prisma',error:'DATABASE_URL missing or empty'});}try{const count=await prisma.observation.count();res.status(200).json({ok:true,driver:'postgres+prisma',count});}catch(err:any){res.status(500).json({ok:false,driver:'postgres+prisma',error:err?.message||'unknown'});} }
